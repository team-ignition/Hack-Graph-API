const FrontierContract = artifacts.require('Standard20TokenMock')
const TRLContract = artifacts.require('TRL')
const config = require('../config')
const keccak256 = require('js-sha3').keccak256
const OwnedRegistryContract = artifacts.require('OwnedRegistry')
const voterAccounts = config.voterAccounts
const candidateAccounts = config.candidateAccounts

module.exports = async () => {
    const stakedTokens = 10
    const FrontierTokenInstance = FrontierContract.at('0x3a1f6b0992b1a3f2a15f52099cf172e9bea930de')
    const TRLInstance = TRLContract.at ('0x11a71dbfadcf69160561e79e97856a8b5ff0bbe4')
    const listAddress = await TRLInstance.address
    await FrontierTokenInstance.approve(listAddress, stakedTokens, {from: voterAccounts[0]})
    await TRLInstance.buyTokenVotes(stakedTokens, {from: voterAccounts[0]})
    await TRLInstance.vote(candidateAccounts[0], stakedTokens, {from: voterAccounts[0]})
    const height = await TRLInstance.height.call()
    const votesReceived = await TRLInstance.votesReceived.call(height, candidateAccounts[0])
    console.log(votesReceived)
}
