{"version":3,"file":"/Users/carlosbuendia/Documents/Projects/consensys/Frontier/clean/trl-api/src/services/dbService.ts","sources":["/Users/carlosbuendia/Documents/Projects/consensys/Frontier/clean/trl-api/src/services/dbService.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qCAAsC;AACtC,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACrC,yCAAkC;AAElC,MAAM,SAAS,GAAG;IACV,YAAY;;YAChB,IAAI;gBACF,MAAM,KAAK,GAAQ,QAAQ,CAAC,YAAY,CAAC,qBAAW,CAAC,CAAC;gBACtD,MAAM,MAAM,GAAQ,MAAM,KAAK,CAAC,YAAY,CAAC,gBAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;gBACvF,MAAM,EAAE,GAAQ,MAAM,CAAC,EAAE,CAAC,gBAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;gBAC1C,OAAO,EAAE,CAAC;aACX;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,OAAO,KAAK,CAAC;aACd;QACH,CAAC;KAAA;IAEK,iBAAiB,CAAC,EAAO;;YAC7B,IAAI;gBACF,MAAM,oBAAoB,GAAQ,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;gBAC9D,MAAM,gBAAgB,GAAQ,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBACtD,MAAM,eAAe,GAAQ,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBAEpD,OAAO;oBACL,oBAAoB;oBACpB,gBAAgB;oBAChB,eAAe;iBAChB,CAAC;aACH;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,OAAO,KAAK,CAAC;aACd;QACH,CAAC;KAAA;CACF,CAAC;AAEF,kBAAe,SAAS,CAAC","sourcesContent":["import { MongoClient } from 'mongodb';\nconst Bluebird = require('bluebird');\nimport config from '../../config';\n\nconst dbService = {\n  async initializeDb() {\n    try {\n      const mongo: any = Bluebird.promisifyAll(MongoClient);\n      const client: any = await mongo.connectAsync(config.db.uri, { useNewUrlParser: true });\n      const db: any = client.db(config.db.name);\n      return db;\n    } catch (error) {\n      console.error(error);\n      return error;\n    }\n  },\n\n  async createCollections(db: any) {\n    try {\n      const candidatesCollection: any = db.collection('candidates');\n      const votersCollection: any = db.collection('voters');\n      const votesCollection: any = db.collection('votes');\n\n      return {\n        candidatesCollection,\n        votersCollection,\n        votesCollection\n      };\n    } catch (error) {\n      console.error(error);\n      return error;\n    }\n  }\n};\n\nexport default dbService;\n"]}